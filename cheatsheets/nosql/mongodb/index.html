<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>MongoDB | Dev Cheatsheets</title>

    <meta property="og:title" content="MongoDB" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="MongoDB" />
<meta name="generator" content="Jekyll v4.3.3" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="A beginner's guide to MongoDB, a popular NoSQL document database.
" />
    <meta property="og:description" content="A beginner's guide to MongoDB, a popular NoSQL document database.
" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/nosql/mongodb/" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/nosql/mongodb/" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "A beginner's guide to MongoDB, a popular NoSQL document database.
",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/nosql/mongodb/",
    "headline":    "MongoDB",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />

            <label for="nav-trigger">
                <span class="menu-icon">
                    <svg viewBox="0 0 18 15" width="18px" height="15px">
                        <path
                            d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                    </svg>
                </span>
            </label>

            <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                    Home
                </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                    Cheatsheets
                </a><a class="page-link" href="/dev-cheatsheets/about.html">
                    About
                </a><a class="ext-link page-link" href="https://michaelcurrin.github.io/code-cookbook/">
                    <span>Code Cookbook</span>
                    <img src="/dev-cheatsheets/assets/ext-link.svg" />
                </a><a class="ext-link page-link" href="https://michaelcurrin.github.io/dev-resources/">
                    <span>Dev Resources</span>
                    <img src="/dev-cheatsheets/assets/ext-link.svg" />
                </a></div>
        </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/nosql/mongodb/index.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/nosql/mongodb/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>MongoDB</span>
        </h1>

        
            <blockquote>
                <p>A beginner's guide to MongoDB, a popular NoSQL document database.</p>

            </blockquote>
        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/nosql/">
    NoSQL
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/nosql/mongodb/" class="underline">
                MongoDB
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <h2>Topics</h2>

<div class="flex-container">
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        </div>

<br>


    <h2>Pages</h2>

    

<ul class="page-list">
    </ul>

    <br>

    
    
        <h2>Content</h2>

        <p>MongoDB is a popular NoSQL document database that stores data in flexible, JSON-like documents with dynamic schemas. It is designed to be scalable, high-performance, and suitable for a wide range of applications, from small-scale projects to large web-scale applications.</p>

<h2 id="related">Related</h2>

<ul>
  <li><a href="/dev-cheatsheets/cheatsheets/python/libraries/database/pymongo/">PyMongo</a> cheatsheet for using the official Python driver for MongoDB.</li>
  <li><a href="/dev-cheatsheets/cheatsheets/python/libraries/database/mongoengine/">MongoEngine</a> cheatsheet for using the MongoEngine Object-Document Mapper for Python.</li>
</ul>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="https://docs.mongodb.com/">MongoDB Documentation</a></li>
  <li><a href="https://learn.mongodb.com/">MongoDB University</a> - free online courses.</li>
</ul>

<h2 id="use-cases">Use Cases</h2>

<p>MongoDB is a versatile database that can be used in a wide range of applications, including:</p>

<ul>
  <li>Content Management Systems (CMS)</li>
  <li>Mobile and Web Applications</li>
  <li>Internet of Things (IoT)</li>
  <li>Real-time Analytics</li>
  <li>Caching</li>
</ul>

<p>Its flexible schema, scalability, and performance make it a popular choice for modern applications that require handling large amounts of unstructured or semi-structured data.</p>

<p>This guide should give you a solid foundation for working with MongoDB. As you gain more experience, you can explore the advanced features and capabilities of MongoDB to build more complex and scalable applications.</p>

<h2 id="installation">Installation</h2>

<p>MongoDB can be installed on various platforms, including Windows, macOS, and Linux. You can download the appropriate installation package from the <a href="https://www.mongodb.com/try/download/community">MongoDB Download Center</a>.</p>

<p>Once installed, you can start the MongoDB server by running the <code class="language-plaintext highlighter-rouge">mongod</code> command for the ‚Äúdaemon‚Äù background process.</p>

<h2 id="mongodb-shell">MongoDB Shell</h2>

<p>The MongoDB shell is an interactive JavaScript interface that allows you to interact with MongoDB databases, collections, and documents. You can launch the shell by running the <code class="language-plaintext highlighter-rouge">mongo</code> command in your terminal or command prompt.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mongo
</code></pre></div></div>

<h2 id="basic-operations">Basic Operations</h2>

<h3 id="creating-a-database">Creating a Database</h3>

<p>In MongoDB, databases are created implicitly when you create your first collection or document. You can switch to a specific database using the <code class="language-plaintext highlighter-rouge">use</code> command:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>use myapp
<span class="go">switched to db myapp
</span></code></pre></div></div>

<h3 id="creating-a-collection">Creating a Collection</h3>

<p>Collections are analogous to tables in relational databases. You can create a collection by inserting your first document into it:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>db.users.insert<span class="o">({</span> name: <span class="s1">'John Doe'</span>, email: <span class="s1">'john@example.com'</span> <span class="o">})</span>
<span class="go">WriteResult({ "nInserted" : 1 })
</span></code></pre></div></div>

<p>This command creates a new collection named <code class="language-plaintext highlighter-rouge">users</code> and inserts a document into it.</p>

<h3 id="querying-documents">Querying Documents</h3>

<p>You can query documents using the <code class="language-plaintext highlighter-rouge">find</code> method:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>db.users.find<span class="o">()</span>
<span class="go">{ "_id" : ObjectId("6436e9c8d9f6b3c8e7f9d9e3"), "name" : "John Doe", "email" : "john@example.com" }
</span></code></pre></div></div>

<p>You can also filter documents using query operators:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>db.users.find<span class="o">({</span> age: <span class="o">{</span> <span class="nv">$gt</span>: 30 <span class="o">}</span> <span class="o">})</span>
</code></pre></div></div>

<h3 id="updating-documents">Updating Documents</h3>

<p>You can update documents using the <code class="language-plaintext highlighter-rouge">update</code> method:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>db.users.update<span class="o">({</span> name: <span class="s1">'John Doe'</span> <span class="o">}</span>, <span class="o">{</span> <span class="nv">$set</span>: <span class="o">{</span> email: <span class="s1">'john.doe@example.com'</span> <span class="o">}</span> <span class="o">})</span>
<span class="go">WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
</span></code></pre></div></div>

<h3 id="deleting-documents">Deleting Documents</h3>

<p>You can delete documents using the <code class="language-plaintext highlighter-rouge">remove</code> method:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>db.users.remove<span class="o">({</span> name: <span class="s1">'John Doe'</span> <span class="o">})</span>
<span class="go">WriteResult({ "nRemoved" : 1 })
</span></code></pre></div></div>

<h2 id="advanced-features">Advanced Features</h2>

<p>MongoDB provides several advanced features, including:</p>

<h3 id="indexing">Indexing</h3>

<p>Indexes can significantly improve query performance by allowing MongoDB to quickly locate relevant documents.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>db.users.createIndex<span class="o">({</span> name: 1 <span class="o">})</span>
</code></pre></div></div>

<h3 id="aggregation">Aggregation</h3>

<p>MongoDB‚Äôs aggregation framework allows you to perform complex data processing and analysis operations on your data.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>db.users.aggregate<span class="o">([</span>
<span class="gp">    { $</span>match: <span class="o">{</span> age: <span class="o">{</span> <span class="nv">$gt</span>: 30 <span class="o">}</span> <span class="o">}</span> <span class="o">}</span>,
<span class="gp">    { $</span>group: <span class="o">{</span> _id: <span class="s1">'$city'</span>, count: <span class="o">{</span> <span class="nv">$sum</span>: 1 <span class="o">}</span> <span class="o">}</span> <span class="o">}</span>
<span class="go">])
</span></code></pre></div></div>

<h3 id="replication">Replication</h3>

<p>Replication allows you to create redundant copies of your data across multiple servers, providing high availability and fault tolerance.</p>

<h3 id="sharding">Sharding</h3>

<p>Sharding is a horizontal scaling technique that allows you to distribute data across multiple servers, enabling your database to scale out as your data grows.</p>

<h3 id="transactions">Transactions</h3>

<p>MongoDB supports multi-document transactions, allowing you to perform multiple operations as an all-or-nothing unit of work.</p>

<p>Sure, here‚Äôs a short section on how to create related collections in MongoDB, using the example of Users and Posts:</p>

<h2 id="related-collections">Related Collections</h2>

<p>MongoDB‚Äôs flexible schema allows you to represent relationships between data in different ways. One common approach is to use separate collections for related entities and establish relationships using references or embedded documents.</p>

<h3 id="users-and-posts">Users and Posts</h3>

<p>Let‚Äôs consider an example where we have a <code class="language-plaintext highlighter-rouge">users</code> collection and a <code class="language-plaintext highlighter-rouge">posts</code> collection, representing user profiles and blog posts, respectively.</p>

<h4 id="sample-of-related-data">Sample of related data</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// users collection</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span><span class="p">:</span> <span class="nc">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">6436e9c8d9f6b3c8e7f9d9e3</span><span class="dl">"</span><span class="p">),</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John Doe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">john@example.com</span><span class="dl">"</span>
<span class="p">}</span>

<span class="c1">// posts collection</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span><span class="p">:</span> <span class="nc">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">6436e9c8d9f6b3c8e7f9d9e4</span><span class="dl">"</span><span class="p">),</span>
  <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">My First Post</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is the content of my first blog post.</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="nc">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">6436e9c8d9f6b3c8e7f9d9e3</span><span class="dl">"</span><span class="p">),</span>
  <span class="dl">"</span><span class="s2">comments</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="nc">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">6436e9c8d9f6b3c8e7f9d9e5</span><span class="dl">"</span><span class="p">),</span>
      <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Great post!</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nc">ISODate</span><span class="p">(</span><span class="dl">"</span><span class="s2">2023-04-11T10:30:00Z</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In this example, we have separate collections for <code class="language-plaintext highlighter-rouge">users</code> and <code class="language-plaintext highlighter-rouge">posts</code>. The <code class="language-plaintext highlighter-rouge">posts</code> collection contains an <code class="language-plaintext highlighter-rouge">author</code> field that references the <code class="language-plaintext highlighter-rouge">_id</code> of the corresponding user document in the <code class="language-plaintext highlighter-rouge">users</code> collection. Additionally, the <code class="language-plaintext highlighter-rouge">comments</code> field in the <code class="language-plaintext highlighter-rouge">posts</code> collection is an array of embedded documents, where each comment references the <code class="language-plaintext highlighter-rouge">_id</code> of the user who posted the comment.</p>

<p>This approach allows you to query and update users and posts independently while maintaining the relationship between them. You can use MongoDB‚Äôs query operators and aggregation framework to perform complex operations involving related data.</p>

<h4 id="create-collections">Create collections</h4>

<p>To create these related collections, you can use the <code class="language-plaintext highlighter-rouge">db.createCollection()</code> method in the MongoDB shell or the appropriate driver method in your programming language of choice.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create the users collection</span>
<span class="nx">db</span><span class="p">.</span><span class="nf">createCollection</span><span class="p">(</span><span class="dl">"</span><span class="s2">users</span><span class="dl">"</span><span class="p">)</span>

<span class="c1">// Create the posts collection</span>
<span class="nx">db</span><span class="p">.</span><span class="nf">createCollection</span><span class="p">(</span><span class="dl">"</span><span class="s2">posts</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Once the collections are created, you can insert documents and establish relationships between them using references or embedded documents, as shown in the example above.</p>

<p>This is just one way to represent relationships in MongoDB. Depending on your data model and requirements, you may choose to use different approaches, such as embedding documents within other documents or using more advanced techniques like application-level joins or data denormalization.</p>

<h4 id="get-all-posts-for-a-user">Get all posts for a user</h4>

<p>To get all posts for a specific user, you can use the <code class="language-plaintext highlighter-rouge">find</code> method and filter the <code class="language-plaintext highlighter-rouge">posts</code> collection based on the <code class="language-plaintext highlighter-rouge">author</code> field, which references the user‚Äôs <code class="language-plaintext highlighter-rouge">_id</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get the user's _id</span>
<span class="kd">var</span> <span class="nx">userId</span> <span class="o">=</span> <span class="nc">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">6436e9c8d9f6b3c8e7f9d9e3</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Find all posts where the author field matches the user's _id</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span> <span class="na">author</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">});</span>
</code></pre></div></div>

<p>This query will return all documents in the <code class="language-plaintext highlighter-rouge">posts</code> collection where the <code class="language-plaintext highlighter-rouge">author</code> field matches the provided <code class="language-plaintext highlighter-rouge">userId</code>.</p>

<h4 id="get-a-user-given-a-comment">Get a user given a comment</h4>

<p>To get the user who posted a specific comment, you can use the <code class="language-plaintext highlighter-rouge">$unwind</code> operator to deconstruct the <code class="language-plaintext highlighter-rouge">comments</code> array in the <code class="language-plaintext highlighter-rouge">posts</code> collection, and then perform a lookup to the <code class="language-plaintext highlighter-rouge">users</code> collection based on the <code class="language-plaintext highlighter-rouge">author</code> field in the comment document.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get the comment's author _id</span>
<span class="kd">var</span> <span class="nx">commentAuthorId</span> <span class="o">=</span> <span class="nc">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">6436e9c8d9f6b3c8e7f9d9e5</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Find the user document based on the comment author _id</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nf">aggregate</span><span class="p">([</span>
  <span class="p">{</span> <span class="na">$unwind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">$comments</span><span class="dl">"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">$match</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">comments.author</span><span class="dl">"</span><span class="p">:</span> <span class="nx">commentAuthorId</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">$lookup</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">users</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">localField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">comments.author</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">foreignField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">as</span><span class="p">:</span> <span class="dl">"</span><span class="s2">commentAuthor</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="na">$unwind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">$commentAuthor</span><span class="dl">"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">$project</span><span class="p">:</span> <span class="p">{</span> <span class="na">_id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">commentAuthor</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>Here‚Äôs what this query does:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">$unwind</code>: Deconstructs the <code class="language-plaintext highlighter-rouge">comments</code> array, creating a separate document for each comment.</li>
  <li><code class="language-plaintext highlighter-rouge">$match</code>: Filters the documents to only include those where the <code class="language-plaintext highlighter-rouge">author</code> field in the comment matches the provided <code class="language-plaintext highlighter-rouge">commentAuthorId</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">$lookup</code>: Performs a left outer join with the <code class="language-plaintext highlighter-rouge">users</code> collection, matching the <code class="language-plaintext highlighter-rouge">author</code> field in the comment with the <code class="language-plaintext highlighter-rouge">_id</code> field in the <code class="language-plaintext highlighter-rouge">users</code> collection. The matched user documents are stored in the <code class="language-plaintext highlighter-rouge">commentAuthor</code> field.</li>
  <li><code class="language-plaintext highlighter-rouge">$unwind</code>: Deconstructs the <code class="language-plaintext highlighter-rouge">commentAuthor</code> array, which should contain at most one document.</li>
  <li><code class="language-plaintext highlighter-rouge">$project</code>: Excludes the <code class="language-plaintext highlighter-rouge">_id</code> field and includes only the <code class="language-plaintext highlighter-rouge">commentAuthor</code> field, which contains the user document for the comment author.</li>
</ol>

<p>This query will return the user document for the author of the specified comment.</p>

<p>Note that these queries assume that you have properly set up the relationships between the <code class="language-plaintext highlighter-rouge">users</code> and <code class="language-plaintext highlighter-rouge">posts</code> collections using references or embedded documents, as shown in the previous example.</p>
    

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
        <a href="https://github.com/MichaelCurrin"><svg
                class="svg-icon">
                <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github">
                </use>
            </svg> <span class="username">MichaelCurrin</span></a>
    </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
