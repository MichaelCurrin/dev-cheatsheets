<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>Time handling | Dev Cheatsheets</title>

    <meta property="og:title" content="Time handling" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Time handling" />
<meta name="generator" content="Jekyll v4.2.2" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
    <meta property="og:description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/python/time-handling.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/python/time-handling.html" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "A collection of code snippets and CLI guides for quick and easy reference while coding",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/python/time-handling.html",
    "headline":    "Time handling",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/python/time-handling.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/python/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Time handling</span>
        </h1>

        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/python/">
    Python
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/python/time-handling.html" class="underline">
                Time handling
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <h2 id="resources">Resources</h2>

<ul>
  <li><a href="https://docs.python.org/3/library/datetime.html">datetime</a> module in Python.</li>
  <li><a href="https://strftime.org/">strftime</a> cheatsheet</li>
  <li><a href="https://www.unixtimestamp.com/">unixtimestamp.com</a> converter.</li>
  <li><a href="https://en.wikipedia.org/wiki/Unix_time">Unix time</a> on Wikipedia.</li>
  <li><a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8061</a> standard on Wikipedia - date, time, and datetime.
    <ul>
      <li>Date
        <ul>
          <li><code class="language-plaintext highlighter-rouge">2022-01-08</code></li>
        </ul>
      </li>
      <li>Date and time in UTC
        <ul>
          <li><code class="language-plaintext highlighter-rouge">2022-01-08T08:18:20+00:00</code></li>
          <li><code class="language-plaintext highlighter-rouge">2022-01-08T08:18:20Z</code></li>
          <li><code class="language-plaintext highlighter-rouge">20220108T081820Z</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="current-time">Current time</h2>

<h3 id="today">Today</h3>

<p>Get a <code class="language-plaintext highlighter-rouge">date</code> object for today‚Äôs date - using <code class="language-plaintext highlighter-rouge">date.today</code> method.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">.</span><span class="n">today</span><span class="p">()</span>
<span class="c1"># datetime.date(2021, 5, 8)
</span></code></pre></div></div>

<h3 id="now">Now</h3>

<p>Get a <code class="language-plaintext highlighter-rouge">datetime</code> object for the current date and time - using <code class="language-plaintext highlighter-rouge">datetime.today</code> or <code class="language-plaintext highlighter-rouge">datetime.now</code> methods:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">today</span><span class="p">()</span>
<span class="c1"># datetime.datetime(2021, 11, 2, 20, 21, 10, 742033)
</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="c1"># datetime.datetime(2021, 11, 2, 20, 21, 10, 753648)
</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="c1"># datetime.datetime(2021, 11, 2, 18, 21, 10, 760241)
</span></code></pre></div></div>

<p>Note - both <code class="language-plaintext highlighter-rouge">today</code> and <code class="language-plaintext highlighter-rouge">now</code> give the same result, but only <code class="language-plaintext highlighter-rouge">now</code> can accept a <a href="#time-zone">time zone</a>. In the examples above, the code was run at GMT+0200. So when <code class="language-plaintext highlighter-rouge">datetime.utcnow</code> method is run, that gives the time at GMT+0000, which is the UTC time and is 2 hours before the others.</p>

<p>Get a float for the current time, using <code class="language-plaintext highlighter-rouge">time</code> module.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
<span class="c1"># 1635876799.357939
</span></code></pre></div></div>

<p>The long way using <code class="language-plaintext highlighter-rouge">datetime</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">today</span><span class="p">().</span><span class="n">timestamp</span><span class="p">()</span>
<span class="c1"># 1635876799.357939
</span></code></pre></div></div>

<h3 id="time">Time</h3>

<p>Unix timestamp:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
<span class="c1"># 1641638542.2153149
</span></code></pre></div></div>

<p>C time:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span><span class="p">.</span><span class="n">ctime</span><span class="p">()</span>
<span class="s">'Sat Jan  8 12:42:28 2022'</span>
</code></pre></div></div>

<h2 id="create">Create</h2>

<h3 id="date">Date</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># datetime.date(2021, 1, 2)
</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># '2021-01-02'
</span></code></pre></div></div>

<h3 id="datetime">Datetime</h3>

<p>Create a datetime from a date - defaults to midnight.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2021, 1, 2, 0, 0)
</span><span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="s">'2021-01-02 00:00:00'</span>
</code></pre></div></div>

<p>Create a datetime object:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2021, 1, 2, 3, 40)
</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># '2021-01-02 03:40:00'
</span></code></pre></div></div>

<p>If you want to be more explicit:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2021</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2021, 1, 2, 0, 0)
</span></code></pre></div></div>

<p>From the docs:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>datetime(year, month, day[, hour[, minute[, second[, microsecond[,tzinfo]]]]])
</code></pre></div>  </div>

  <p>The year, month and day arguments are required. tzinfo may be None, or an instance of a tzinfo subclass. The remaining arguments may be ints.</p>
</blockquote>

<h2 id="attributes">Attributes</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">ATTRIBUTE</span>
</code></pre></div></div>

<p>e.g.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">n</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">n</span><span class="p">.</span><span class="n">hour</span>
<span class="c1"># 11
</span>
<span class="n">n</span><span class="p">.</span><span class="n">year</span>
<span class="c1"># 2021
</span>
<span class="n">n</span><span class="p">.</span><span class="n">month</span>
<span class="c1"># 5
</span>
<span class="n">n</span><span class="p">.</span><span class="n">day</span>
<span class="c1"># 8
</span>
<span class="n">n</span><span class="p">.</span><span class="n">hour</span>
<span class="c1"># 11
</span>
<span class="n">n</span><span class="p">.</span><span class="n">minute</span>
<span class="c1"># 30
</span>
<span class="n">n</span><span class="p">.</span><span class="n">second</span>
<span class="c1"># 51
</span></code></pre></div></div>

<h2 id="format">Format</h2>

<p>Format a datetime value as a string.</p>

<p>See <a href="#format-codes">Format codes</a> for what symbols to use when formatting or parsing.</p>

<h3 id="format-datetime-as-built-in-string">Format datetime as built-in string</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
</code></pre></div></div>

<p>Use <a href="#resources">ISO-8601</a> format:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="p">.</span><span class="n">isoformat</span><span class="p">()</span>
<span class="c1"># '2021-11-02T20:19:57.928643'
</span></code></pre></div></div>

<p>You can also stringify the object for the same result:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># '2021-11-02T20:19:57.928643'
</span></code></pre></div></div>

<p>Use C time:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">dt</span><span class="p">.</span><span class="n">ctime</span><span class="p">()</span>
<span class="c1"># 'Sat Jan  8 12:41:22 2022'
</span></code></pre></div></div>

<h3 id="format-datetime-as-custom-string">Format datetime as custom string</h3>

<p>Convert from date or datetime object to a custom string.</p>

<p>Using <code class="language-plaintext highlighter-rouge">.strftime</code> where  the <code class="language-plaintext highlighter-rouge">f</code> is for ‚Äúformat‚Äù.</p>

<p>Supply a custom format.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MY_DATETIME</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">MY_FORMAT</span><span class="p">)</span>
</code></pre></div></div>

<p>e.g.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="c1"># datetime.datetime(2021, 5, 8, 11, 30, 51, 733268)
</span></code></pre></div></div>

<p>Showing functionality of a few areas:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%Y/%m/%d - %b %y - %H:%M:%S'</span><span class="p">)</span>
<span class="c1"># '2021/05/08 - May 21 - 11:05:51'
</span></code></pre></div></div>

<p>Short date and 24-hour time:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%Y-%m-%d %H:%M'</span><span class="p">)</span>
<span class="s">'2021-11-02 20:11'</span>
</code></pre></div></div>

<h2 id="parse">Parse</h2>

<p>Parse a string as a datetime object.</p>

<p>See <a href="#format-codes">Format codes</a> for what symbols to use when formatting or parsing.</p>

<h3 id="parse-string-as-datetime">Parse string as datetime</h3>

<p>Parse from a string to datetime object.</p>

<p>Using <code class="language-plaintext highlighter-rouge">strptime</code>, where the <code class="language-plaintext highlighter-rouge">p</code> stands for ‚Äúparse‚Äù.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">DATETIME_STRING</span><span class="p">,</span> <span class="n">CUSTOM_FORMAT</span><span class="p">)</span>
</code></pre></div></div>

<p>e.g.</p>

<p>Set the time.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="s">"21/11/06 16:30"</span><span class="p">,</span> <span class="s">"%d/%m/%y %H:%M"</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2006, 11, 21, 16, 30)
</span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="c1"># '2006-11-21 16:30:00'
</span></code></pre></div></div>

<p>Omit time and it will be midnight.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="s">'2021-01-02'</span><span class="p">,</span> <span class="s">'%Y-%m-%d'</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2021, 1, 2, 0, 0)
</span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="c1"># '2021-01-02 00:00:00'
</span>
<span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="s">'12/05/19'</span><span class="p">,</span> <span class="s">'%m/%d/%y'</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2019, 12, 5, 0, 0)
</span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="s">'2019-12-05 00:00:00'</span>
</code></pre></div></div>

<p>There is no <code class="language-plaintext highlighter-rouge">strptime</code> method on <code class="language-plaintext highlighter-rouge">datetime.date</code>, but you can convert a datetime to date. See the next section.</p>

<h3 id="parse-iso-8061-datetime-string">Parse ISO 8061 datetime string</h3>

<p>Parse <a href="#resources">ISO 8061</a> format date and time with timezone.</p>

<p>e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2020-01-24T08:37:37+00:00
</code></pre></div></div>

<p>The response is a timezone-aware datetime object.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">v</span> <span class="o">=</span> <span class="s">"2020-01-24T08:37:37+00:00"</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2020, 1, 24, 8, 37, 37, tzinfo=datetime.timezone.utc)
</span></code></pre></div></div>

<h3 id="parse-long-format">Parse long format</h3>

<p>e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Thu, 30 Aug 2018 13:14:09 GMT
</code></pre></div></div>

<p>From my <a href="https://github.com/MichaelCurrin/aggre-git/blob/master/aggregit/lib/__init__.py">aggregit</a> repo.</p>

<p>See <a href="https://stackoverflow.com/questions/7703865/going-from-twitter-date-to-python-datetime-date">SO</a> answers.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">email.utils</span> <span class="kn">import</span> <span class="n">mktime_tz</span><span class="p">,</span> <span class="n">parsedate_tz</span>


<span class="k">def</span> <span class="nf">parse_datetime</span><span class="p">(</span><span class="n">standard_datetime</span><span class="p">):</span>
    <span class="s">"""
    Parse a standardised datetime string to a datetime object.
    
    :param standard_datetime: datetime value as a string.
        e.g. 'Thu, 30 Aug 2018 13:14:09 GMT'
        
    :return: timezone-aware datetime object in UTC time. 
        Printing this out will reflect in the system's timezone. 
        e.g. entering time 12:00 for +0000 timezone shows as 14:00 
        if printing in a system set to +0200 timezone,
        whether doing `str(obj)` or `str(obj.hour)`.
    """</span>
    <span class="n">time_tuple</span> <span class="o">=</span> <span class="n">parsedate_tz</span><span class="p">(</span><span class="n">standard_datetime</span><span class="p">)</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">mktime_tz</span><span class="p">(</span><span class="n">time_tuple</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="format-codes">Format codes</h2>

<ul>
  <li><a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">strftime() and strptime() Format Codes</a></li>
</ul>

<p>Some useful combinations:</p>

<ul>
  <li>Long day.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  %A, %-d %B %Y
  Sunday, 1 January 2021
</code></pre></div>    </div>
  </li>
  <li>Short day.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  %Y-%M-%d
  2021-01-01
</code></pre></div>    </div>
  </li>
  <li>12-hour time
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  %I:%M %p
  11:01 AM
  11:01 PM
</code></pre></div>    </div>
  </li>
  <li>24-hour time
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  %H:%M:%Ss
  11:01:01s
  23:01:01s
</code></pre></div>    </div>
  </li>
  <li>Time zone.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  %z
  +0000
  -0400
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="conversion">Conversion</h2>

<p>Move between date formats. For converting to and from strings, see section above.</p>

<h3 id="convert-from-date-to-datetime">Convert from date to datetime</h3>

<p>Get a date object from datetime object.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span><span class="p">.</span><span class="n">date</span><span class="p">()</span>
</code></pre></div></div>

<p>e.g. Current date.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">214702</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">dt</span><span class="p">.</span><span class="n">date</span><span class="p">()</span>
<span class="c1"># datetime.date(2022, 1, 8)
</span></code></pre></div></div>

<p>Parse a string of a date (just omit the time) then convert from datetime to date.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="s">'12/05/19'</span><span class="p">,</span> <span class="s">'%m/%d/%y'</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">dt</span><span class="p">.</span><span class="n">date</span><span class="p">()</span>
<span class="c1"># datetime.date(2019, 12, 5)
</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="s">'2019-12-05'</span>
</code></pre></div></div>

<h3 id="convert-from-date-to-datetime-1">Convert from date to datetime</h3>

<p>There aren‚Äôt anything methods on a <code class="language-plaintext highlighter-rouge">date</code> object we can use.</p>

<p>So you need to make a new <code class="language-plaintext highlighter-rouge">datetime</code> object from the <code class="language-plaintext highlighter-rouge">date</code> object‚Äôs properties.</p>

<p>Omit the time:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">day</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2022, 1, 8, 0, 0)
</span></code></pre></div></div>

<p>Then set it after if you need to:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">34</span><span class="p">)</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">34</span><span class="p">)</span>
</code></pre></div></div>

<p>Specify a time at creation:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">y</span><span class="p">.</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">y</span><span class="p">.</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="n">y</span><span class="p">.</span><span class="n">day</span><span class="p">,</span> 
                  <span class="n">hour</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">34</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">56</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2022, 1, 8, 12, 34, 56)
</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">y</span><span class="p">.</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">y</span><span class="p">.</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="n">y</span><span class="p">.</span><span class="n">day</span><span class="p">,</span> 
                  <span class="n">hour</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">34</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2022, 1, 8, 12, 34)
</span></code></pre></div></div>

<h3 id="convert-from-datetime-to-time">Convert from datetime to time</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
</code></pre></div></div>

<p>e.g.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="c1"># datetime.datetime(2022, 1, 8, 13, 8, 1, 493063)
</span><span class="n">dt</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
<span class="c1"># datetime.time(13, 8, 1, 493063)
</span></code></pre></div></div>

<h3 id="convert-from-unix-timestamp-to-datetime">Convert from unix timestamp to datetime</h3>

<p>Pass in an integer or flaot.</p>

<p>Use <code class="language-plaintext highlighter-rouge">datetime.datetime.fromtimestamp</code> to get datetime or <code class="language-plaintext highlighter-rouge">datetime.date.fromtimestamp</code> to get a date.</p>

<p>e.g.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="mf">1403602426.0</span><span class="p">)</span>
<span class="c1"># datetime.datetime(2014, 6, 24, 11, 33, 46)
</span></code></pre></div></div>

<h3 id="convert-unix-timestamp-to-date-and-time">Convert unix timestamp to date and time</h3>

<p>Convert duration in seconds to equivalent value in days, hours, minutes or seconds. Using maths and without using <code class="language-plaintext highlighter-rouge">datetime</code>, in case you ever had to do this or something similar.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">duration</span> <span class="o">=</span> <span class="mi">1234</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="p">(</span><span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span> <span class="o">%</span> <span class="mi">24</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="mi">60</span> <span class="o">%</span> <span class="mi">60</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">%</span> <span class="mi">60</span>
<span class="n">d</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">s</span>
<span class="c1"># (0.014282407407407407, 0.3427777777777778, 20.566666666666666, 34)
</span></code></pre></div></div>

<h2 id="timedelta">Timedelta</h2>
<blockquote>
  <p>Or time difference or duration</p>
</blockquote>

<p>You can add and subtract date or datetime objects from each other.</p>

<h3 id="how-many-days">How many days</h3>

<p>Get timedelta in days between two dates.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># datetime.timedelta(days=4)
</span></code></pre></div></div>

<h3 id="difference-in-seconds">Difference in seconds</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">y</span> <span class="o">-</span> <span class="n">x</span>
<span class="c1"># datetime.timedelta(seconds=2, microseconds=693039)
</span>
<span class="n">x</span> <span class="o">-</span> <span class="n">y</span>
<span class="c1"># datetime.timedelta(days=-1, seconds=86397, microseconds=306961)
</span></code></pre></div></div>

<h3 id="find-difference-between-a-timestamp-and-now">Find difference between a timestamp and now</h3>

<p>Lets say you want to get age.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">.</span><span class="n">today</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># datetime.timedelta(days=11449)
</span>
<span class="n">x</span><span class="p">.</span><span class="n">days</span>
<span class="c1"># 11449
</span>
<span class="c1"># Appromiate age in years.
</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">days</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># 31.35
</span>
<span class="n">x</span><span class="p">.</span><span class="n">total_seconds</span><span class="p">()</span>
<span class="mf">989193600.0</span>
</code></pre></div></div>

<p>In one line from the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python3 <span class="nt">-c</span> <span class="s1">'import datetime; print( round( ( datetime.date.today() - datetime.date(1989, 6, 3) ).days / 365.25, 2 ) )'</span>
31.93
</code></pre></div></div>

<h3 id="future-time">Future time</h3>

<p>Let‚Äôs say you want something to expire in 30 minutes from now and you want to know when that is.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">n</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1"># '2021-05-08 11:30:51.733268'
</span>
<span class="n">expire_at</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="n">expire_at</span><span class="p">)</span>
<span class="c1"># '2021-05-08 12:00:51.733268'
</span></code></pre></div></div>

<p>You can be more precise with hours, minutes and seconds.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># datetime.timedelta(seconds=3723)
</span>
<span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="s">'1:02:03'</span>
</code></pre></div></div>

<p>Or with days.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># datetime.timedelta(days=1000, seconds=10)
</span>
<span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># '1000 days, 0:00:10'
</span></code></pre></div></div>

<h2 id="time-zone">Time zone</h2>

<p>You can also set a time zone with a <code class="language-plaintext highlighter-rouge">tzinfo</code> object. See  the <a href="https://pypi.org/project/pytz/">pytz</a> library, which can be installed a package.</p>

<blockquote>
  <p>The preferred way of dealing with times is to always work in UTC, converting to localtime only when generating output to be read by humans.</p>
</blockquote>

<p>Here adding <code class="language-plaintext highlighter-rouge">tzinfo</code> to a <code class="language-plaintext highlighter-rouge">datetime</code> object, though this does not work properly for timezones which use daylight savings.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pytz</span>


<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="p">.</span><span class="n">utc</span><span class="p">)</span>

<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="p">.</span><span class="n">utc</span><span class="p">)</span>
</code></pre></div></div>

<p>My example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">pytz</span>
<span class="kn">from</span> <span class="nn">pytz</span> <span class="kn">import</span> <span class="n">timezone</span>


<span class="n">FMT</span> <span class="o">=</span> <span class="s">"%Y-%m-%d %H:%M:%S %Z%z"</span>

<span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">amsterdam</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s">"Europe/Amsterdam"</span><span class="p">)</span>
<span class="n">loc_dt</span> <span class="o">=</span> <span class="n">amsterdam</span><span class="p">.</span><span class="n">localize</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>

<span class="c1"># Naiive
</span><span class="k">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="c1"># 2002-10-27 06:00:00
</span>
<span class="c1"># Timezone aware
</span><span class="k">print</span><span class="p">(</span><span class="n">loc_dt</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">FMT</span><span class="p">))</span>
<span class="c1"># 2002-10-27 06:00:00 CET+0100
</span>
<span class="c1"># Note straight printing gives you offset but not the symbol.
</span><span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">loc_dt</span><span class="p">))</span>
<span class="c1"># 2002-10-27 06:00:00+01:00
</span>
<span class="c1"># Display in another timezone.
</span><span class="n">utc</span> <span class="o">=</span> <span class="n">pytz</span><span class="p">.</span><span class="n">utc</span>
<span class="k">print</span><span class="p">(</span><span class="n">loc_dt</span><span class="p">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">utc</span><span class="p">))</span>
<span class="c1"># 2002-10-27 05:00:00+00:00
</span></code></pre></div></div>

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
