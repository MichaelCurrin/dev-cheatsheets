<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>Text files | Dev Cheatsheets</title>

    <meta property="og:title" content="Text files" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Text files" />
<meta name="generator" content="Jekyll v4.3.2" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
    <meta property="og:description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/python/files-and-paths/read-and-write/text-files.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/python/files-and-paths/read-and-write/text-files.html" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "A collection of code snippets and CLI guides for quick and easy reference while coding",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/python/files-and-paths/read-and-write/text-files.html",
    "headline":    "Text files",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/python/files-and-paths/read-and-write/text-files.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/python/files-and-paths/read-and-write/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Text files</span>
        </h1>

        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/python/">
    Python
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/python/files-and-paths/">
    Files and paths
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/python/files-and-paths/read-and-write/">
    Read and write
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/python/files-and-paths/read-and-write/text-files.html" class="underline">
                Text files
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <p>Such as a <code class="language-plaintext highlighter-rouge">.txt</code> file, though this will work on any file that is text (i.e. not a zip or image or binary executable).</p>

<h2 id="read-text-file">Read text file</h2>

<p>Given file with contents:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">foo.txt</code>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Line 1
  Line 2
  Line 3
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="process-as-needed">Process as needed</h3>

<p>Instead of reading the whole file into memory, process lines as they are needed. Such as to print them or add to a database.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_in</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f_in</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="nf">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</code></pre></div></div>

<p>Result:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sh">'</span><span class="s">Line 1</span><span class="se">\n</span><span class="sh">'</span>
<span class="sh">'</span><span class="s">Line 2</span><span class="se">\n</span><span class="sh">'</span>
<span class="sh">'</span><span class="s">Line 3</span><span class="se">\n</span><span class="sh">'</span>
</code></pre></div></div>

<h3 id="file-contents-as-a-string">File contents as a string</h3>

<p>Get a file as a single string variable, with line breaks in it.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_in</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">f_in</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div></div>

<p>The value will be like:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;&gt;&gt;</span> <span class="n">text</span>
<span class="sh">"</span><span class="s">Line 1\And line 2</span><span class="se">\n</span><span class="s">Line 3</span><span class="se">\n</span><span class="sh">"</span>
</code></pre></div></div>

<h3 id="file-rows-as-strings">File rows as strings</h3>

<p>Here we <strong>split</strong> that single string of the file text into a <strong>list of strings</strong>. Using the <code class="language-plaintext highlighter-rouge">str.splitlines</code> method.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_in</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">f_in</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="nf">splitlines</span><span class="p">()</span>
</code></pre></div></div>

<p>Result:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;&gt;&gt;</span> <span class="n">lines</span>
<span class="p">[</span>
    <span class="sh">"</span><span class="s">Line 1</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">Line 2</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">Line 3</span><span class="sh">"</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div></div>

<p>Note there are <strong>no</strong> trailing newline characters.</p>

<p>Get the line count with <code class="language-plaintext highlighter-rouge">len</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;&gt;&gt;</span> <span class="nf">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="mi">3</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Line count: </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="n">Line</span> <span class="n">count</span><span class="p">:</span> <span class="mi">3</span>
</code></pre></div></div>

<h2 id="convert-file-to-list">Convert file to list</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_in</span><span class="p">:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">f_in</span><span class="p">)</span>
    <span class="c1"># OR
</span>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f_in</span><span class="p">]</span>
</code></pre></div></div>

<p>Result:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;&gt;&gt;</span> <span class="n">lines</span>
<span class="p">[</span>
    <span class="sh">'</span><span class="s">Line 1</span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">Line 2</span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">Line 3</span><span class="se">\n</span><span class="sh">'</span>
<span class="p">]</span>
</code></pre></div></div>

<p>Note the trailing newlines, which can be avoided by using another approach above.</p>

<h3 id="read-one-line-at-a-time">Read one line at a time</h3>

<p>Read line by line, as you need a line. This is usually more memory efficient than reading the entire file into memory. And is more practical if you might only need the first few lines and then will close the file.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">process_line</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>


<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_in</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f_in</span><span class="p">:</span>
        <span class="nf">process_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="how-to-use-seek">How to use seek</h3>

<p>After you‚Äôve the whole file, then Python will have moved open. If you try and read the file again it will appear empty.</p>

<p>So you‚Äôll have to close the file and open it again.</p>

<p>Or, you can use the seek method.</p>

<p>Use <code class="language-plaintext highlighter-rouge">f.seek(0)</code> to reset if you need to read the entire file multiple times.</p>

<p>Example, in the interactive console:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;&gt;&gt;</span> <span class="n">f_in</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">file.txt</span><span class="sh">'</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">f_in</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>   <span class="c1"># It has content.
</span><span class="sh">'</span><span class="s">First line</span><span class="se">\n</span><span class="s">Second line</span><span class="se">\n</span><span class="sh">'</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">f_in</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>   <span class="c1"># Appears empty
</span><span class="sh">''</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">f_in</span><span class="p">.</span><span class="nf">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Reset.
</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">f_in</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>   <span class="c1"># It has content again
</span><span class="sh">'</span><span class="s">First line</span><span class="se">\n</span><span class="s">Second line</span><span class="se">\n</span><span class="sh">'</span>
</code></pre></div></div>

<h2 id="write-text-file">Write text file</h2>

<p>Write a list of strings as a multi-line file.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span>
  <span class="sh">"</span><span class="s">Line 1 contents.</span><span class="sh">"</span><span class="p">,</span>
  <span class="sh">"</span><span class="s">And line 2.</span><span class="sh">"</span>
<span class="p">]</span>

<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_out</span><span class="p">:</span>
    <span class="n">f_out</span><span class="p">.</span><span class="nf">writelines</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</code></pre></div></div>

<p>Write one line at a time.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_out</span><span class="p">:</span>
    <span class="n">f_out</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">'</span><span class="s">foo</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">f_out</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">'</span><span class="s">bar</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>Example path values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">text.txt</code> - same as <code class="language-plaintext highlighter-rouge">./text.txt</code></li>
  <li><code class="language-plaintext highlighter-rouge">foo/bar.txt</code> - path to file in a directory.</li>
  <li>An absolute path like <code class="language-plaintext highlighter-rouge">/home/michael/foo/bar.txt</code></li>
</ul>

<p>Don‚Äôt use <code class="language-plaintext highlighter-rouge">~</code> - you need to expand that first.</p>

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
