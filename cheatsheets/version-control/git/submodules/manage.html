<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>Manage | Dev Cheatsheets</title>

    <meta property="og:title" content="Manage" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Manage" />
<meta name="generator" content="Jekyll v4.2.1" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
    <meta property="og:description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/version-control/git/submodules/manage.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/version-control/git/submodules/manage.html" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "A collection of code snippets and CLI guides for quick and easy reference while coding",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/version-control/git/submodules/manage.html",
    "headline":    "Manage",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/version-control/git/submodules/manage.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/version-control/git/submodules/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Manage</span>
        </h1>

        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/version-control/">
    Version control
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/version-control/git/">
    Git
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/version-control/git/submodules/">
    Submodules
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/version-control/git/submodules/manage.html" class="underline">
                Manage
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <h2 id="update-submodule">Update submodule</h2>

<h3 id="1-pull-in-changes">1. Pull in changes</h3>

<p>Pull in changes. Note that without <code class="language-plaintext highlighter-rouge">--remote</code>, nothing will happen.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git submodule update <span class="nt">--rebase</span> <span class="nt">--remote</span>
</code></pre></div></div>

<p>I found that recommended in <a href="https://gohugo.io/hosting-and-deployment/hosting-on-netlify/">Hugo docs</a> for themes.</p>

<p>That is effectively the same as this, but I wouldn‚Äôt recommend this. Also note that <code class="language-plaintext highlighter-rouge">git pull</code> alone will warn that you are not on a branch.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>themes/ananke
<span class="nv">$ </span>git pull origin master
<span class="nv">$ </span><span class="nb">cd</span> ..
</code></pre></div></div>

<p>If you want to use tag instead. See <a href="/dev-cheatsheets/cheatsheets/version-control/git/tags.html">Tags</a> cheatsheet.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>themes/ananke
git checkout <span class="si">$(</span>git describe <span class="nt">--abbrev</span><span class="o">=</span>0 <span class="nt">--tags</span><span class="si">)</span>
<span class="nb">cd</span> ..
</code></pre></div></div>

<p>Check for changes. You should see that the submodule object appears to change from one commit to another, without showing the full details (because you repo doesn‚Äôt care about the all commits and the files, just the commit reference).</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>git diff
<span class="c">...
</span><span class="go">--- a/themes/ananke
+++ b/themes/ananke
@@ -1 +1 @@
-Subproject commit 0cc2c6cb62bbe86dbafc3e4e3b083d2654934aa3
+Subproject commit 988c731a5762a6e0a1aad4fd2023caa2dc1e082d
</span><span class="c">...
</span></code></pre></div></div>

<h3 id="2-commit">2. Commit</h3>

<p>Then commit the new reference.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git commit SUB_MODULE_PATH
<span class="nv">$ </span><span class="c"># e.g.</span>
<span class="nv">$ </span>git commit themes/ananke
</code></pre></div></div>

<h2 id="reset">Reset</h2>

<p>After updating a submodule but not committing, I wanted to go back the old submodule reference. Using <code class="language-plaintext highlighter-rouge">git checkout</code> doesn‚Äôt help here, even though the reference shows up as modified.</p>

<p>This works though:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git submodule update
</code></pre></div></div>

<p>Then <code class="language-plaintext highlighter-rouge">git status</code> was clean.</p>

<p>You may need one of these flags:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git submodule update <span class="nt">--checkout</span>
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git submodule update <span class="nt">--force</span>
</code></pre></div></div>

<h2 id="get-submodule-content">Get submodule content</h2>

<p>Assuming you have repo on GitHub that has at least one submodule, you want to clone it somewhere (maybe in another local location to test it) or on another machine or in CI.</p>

<p>When you clone the outer repo, the internal repo references will be included, since submodule reference exist are commit objects. But, the submodule directories will be <strong>empty</strong> initially.</p>

<p>To download the content, you need to either one of these steps.</p>

<h3 id="clone-with-submodules">Clone with submodules</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone OUTER_REPO_URL <span class="nt">--recurse-submodules</span>
</code></pre></div></div>

<p>That is equivalent to the section below.</p>

<h3 id="initialize-and-update-submodule-manually">Initialize and update submodule manually</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone OUTER_REPO_URL
<span class="nv">$ </span><span class="nb">cd </span>my-repo
<span class="nv">$ </span>git submodule init
<span class="nv">$ </span>git submodule update
</code></pre></div></div>

<h2 id="switch-branches">Switch branches</h2>

<p>When you have branches pointing to different commits of a submodule, the submodule will appear as modified.</p>

<p>The docs recommend this as a solution, presumably with a branch name passed too.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git checkout <span class="nt">--recurse-submodules</span>
</code></pre></div></div>

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
