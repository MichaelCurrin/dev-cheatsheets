<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>Options | Dev Cheatsheets</title>

    <meta property="og:title" content="Options" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Options" />
<meta name="generator" content="Jekyll v4.2.1" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="Set shell options in a script or at a global level to change how the shell behaves" />
    <meta property="og:description" content="Set shell options in a script or at a global level to change how the shell behaves" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/scripting/options.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/scripting/options.html" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "Set shell options in a script or at a global level to change how the shell behaves",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/scripting/options.html",
    "headline":    "Options",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/shell/scripting/options.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/shell/scripting/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Options</span>
        </h1>

        
            <blockquote>
                <p>Set shell options in a script or at a global level to change how the shell behaves</p>

            </blockquote>
        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/shell/">
    Shell
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/shell/scripting/">
    Scripting
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/shell/scripting/options.html" class="underline">
                Options
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <p>This applies both for shell scripting and running commands in interactive CLI.</p>

<p>This page is focussed on <code class="language-plaintext highlighter-rouge">bash</code> but behavior should be similar for <code class="language-plaintext highlighter-rouge">zsh</code>.</p>

<h2 id="overview-of-how-to-set-flags">Overview of how to set flags</h2>

<h3 id="shebang">Shebang</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash -e</span>
</code></pre></div></div>

<p>Multiple:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash -eo pipefail</span>
</code></pre></div></div>

<p>If you use <code class="language-plaintext highlighter-rouge">env</code>, you need to provide options in the body of the script.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-e</span>
</code></pre></div></div>

<h3 id="cli">CLI</h3>

<p>On the CLI before running a command.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">set</span> <span class="nt">-e</span>
<span class="nv">$ </span>./script.sh
</code></pre></div></div>

<p>Or</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bash <span class="nt">-e</span> script.sh
</code></pre></div></div>

<p>Using minus will enable the flag to exit on error.</p>

<p>Using a plus sign will disable the flag.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">set</span> <span class="nt">-e</span>

<span class="nb">set</span> +e
</code></pre></div></div>

<h2 id="options-flag">Options flag</h2>

<p>From <code class="language-plaintext highlighter-rouge">man bash</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-o optname
      True if shell option optname is enabled.  See the list of options under the description of the -o
      option to the set builtin below.
</code></pre></div></div>

<p>Provide <code class="language-plaintext highlighter-rouge">opname</code> as <code class="language-plaintext highlighter-rouge">errexit</code>, <code class="language-plaintext highlighter-rouge">noclobber</code>, <code class="language-plaintext highlighter-rouge">pipefail</code>, etc.</p>

<p>Omit <code class="language-plaintext highlighter-rouge">optname</code> to print values.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bash <span class="nt">-o</span>
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>allexport       off
braceexpand     on
emacs           on
errexit         off
errtrace        off
functrace       off
hashall         on
histexpand      on
history         on
ignoreeof       off
interactive-comments    on
keyword         off
monitor         off
noclobber       off
noexec          off
noglob          off
nolog           off
notify          off
nounset         off
onecmd          off
physical        off
pipefail        off
posix           off
privileged      off
verbose         off
vi              off
xtrace          off
</code></pre></div></div>

<h2 id="prevent-accidental-file-overwrites">Prevent accidental file overwrites</h2>

<h3 id="redirection">Redirection</h3>

<blockquote>
  <p>Prevent output redirection using ‚Äò&gt;‚Äô, ‚Äò&gt;&amp;‚Äô, and ‚Äò&lt;&gt;‚Äô from overwriting existing files. <a href="https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html#The-Set-Builtin">source</a></p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">set</span> <span class="nt">-C</span>
<span class="c"># OR</span>
<span class="nb">set</span> <span class="nt">-o</span> noclobber
</code></pre></div></div>

<p>When this flag is enable, using <code class="language-plaintext highlighter-rouge">&gt; file</code> will give an error.</p>

<p>Using <code class="language-plaintext highlighter-rouge">&gt;| file</code> seems to force.</p>

<p>This is useful to set in your <code class="language-plaintext highlighter-rouge">~/.bashrc</code> file, so it is always set globally.</p>

<h3 id="copy-and-move">Copy and move</h3>

<p>Here is an alternative, using aliases and flags instead of shell optios.</p>

<p><a href="https://unix.stackexchange.com/questions/452865/are-there-any-disadvantages-of-setting-noclobber">source</a></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias cp</span><span class="o">=</span><span class="s1">'cp -i'</span>
<span class="nb">alias mv</span><span class="o">=</span><span class="s1">'mv -i'</span>
</code></pre></div></div>

<h2 id="exit-on-error">Exit on error</h2>

<ul>
  <li>Using <code class="language-plaintext highlighter-rouge">set</code> <a href="https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html#The-Set-Builtin">docs</a>.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">set</span> <span class="nt">-e</span>
</code></pre></div>    </div>
  </li>
  <li>Using CLI option.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>bash <span class="nt">-e</span>
  <span class="nv">$ </span><span class="c"># OR</span>
  <span class="nv">$ </span>bash <span class="nt">-o</span> errexit
</code></pre></div>    </div>
  </li>
  <li>In a shebang. Only works with <code class="language-plaintext highlighter-rouge">#!/bin/bash</code> and not <code class="language-plaintext highlighter-rouge">#!/usr/bin/env bash</code>.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash -e</span>

  <span class="nb">echo</span> <span class="s1">'Hello!'</span>
</code></pre></div>    </div>
  </li>
  <li>Setting in he body of the script.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/usr/bin/env bash</span>

  <span class="nb">set</span> <span class="nt">-e</span>
  <span class="nb">echo</span> <span class="s1">'Hello!'</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="error-trace">Error trace</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-o errtrace
-E
</code></pre></div></div>

<p>From the man page:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  -E      If  set, any trap on ERR is inherited by shell functions, command substitutions, and com-
          mands executed in a subshell environment.  The ERR trap is normally not inherited in such
          cases.
</code></pre></div></div>

<h2 id="pipe-fail">Pipe fail</h2>

<p>See more info in <a href="/dev-cheatsheets/cheatsheets/shell/scripting/input-output.html">Piping</a> cheatsheet.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-o pipefail
</code></pre></div></div>

<p>Based on  example from CircleCI.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash -eo pipefail</span>
</code></pre></div></div>

<p>From <code class="language-plaintext highlighter-rouge">man bash</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  pipefail
          If set, the return value of a pipeline is the value of the last (rightmost)  com-
          mand to exit with a non-zero status, or zero if all commands in the pipeline exit
          successfully.  This option is disabled by default.
</code></pre></div></div>

<h2 id="verbose">Verbose</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-v      Print shell input lines as they are read.
</code></pre></div></div>

<h2 id="xtrace">Xtrace</h2>

<p>From the man page:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-o xtrace
-x
</code></pre></div></div>

<p>From the docs:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-x      After expanding each simple command, for command, case command, select command, or arith-
        metic for command, display the expanded value of PS4, followed by  the  command  and  its
        expanded arguments or associated word list.
</code></pre></div></div>

<h2 id="dashes">Dashes</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  --      If no arguments follow this option, then the positional parameters are unset.  Otherwise,
          the positional parameters are set to the args, even if some of them begin with a -.
  -       Signal the end of options, cause all remaining args to  be  assigned  to  the  positional
          parameters.   The -x and -v options are turned off.  If there are no args, the positional
          parameters remain unchanged.
</code></pre></div></div>

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
