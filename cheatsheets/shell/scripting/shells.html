<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Working with shells | Dev Cheatsheets</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Working with shells" />
<meta name="author" content="Michael Currin" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
<meta property="og:description" content="A collection of code snippets and CLI guides for quick and easy reference while coding" />
<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/scripting/shells.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/scripting/shells.html" />
<meta property="og:site_name" content="Dev Cheatsheets" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Working with shells" />
<script type="application/ld+json">
{"headline":"Working with shells","description":"A collection of code snippets and CLI guides for quick and easy reference while coding","url":"https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/scripting/shells.html","author":{"@type":"Person","name":"Michael Currin"},"@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/shell/scripting/shells.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/shell/scripting/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Working with shells</span>
        </h1>

        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/shell/">
    Shell
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/shell/scripting/">
    Scripting
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/shell/scripting/shells.html" class="underline">
                Working with shells
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <h2 id="start-a-subshell">Start a subshell</h2>

<p>In a Bash shell, you can invoke another Bash <em>subshell</em> in interactive mode.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bash
</code></pre></div></div>

<p>You might not see anything different in the prompt. Though  some variables from the outer shell won‚Äôt be available. Any variables you set in the inner shell won‚Äôt be available in the outer shell. Also your Python environment could no longer be active.</p>

<p>If you enter <code class="language-plaintext highlighter-rouge">exit</code> or press <kbd>CTRL</kbd>+<kbd>D</kbd>, then you will return to the outer shell session.</p>

<p>Note that you should <strong>not</strong> use this to switch between shells, as the config file will not be executed appropriately. Use the <a href="#start-new-shell-session">Start new shell session</a> section below.</p>

<h2 id="get-current-shell">Get current shell</h2>

<p>This will print the program name, which in the case of the shell is the actual shell. <a href="https://stackoverflow.com/questions/3327013/how-to-determine-the-current-shell-im-working-on">source</a></p>

<h3 id="conditional">Conditional</h3>

<p>In short, the most reliable way in conditional flow is this. To be tested. Perhaps it can work with <code class="language-plaintext highlighter-rouge">case</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">IS_BASH</span><span class="o">=</span><span class="nb">false
</span><span class="nv">IS_ZSH</span><span class="o">=</span><span class="nb">false

</span><span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span> <span class="o">==</span> <span class="k">*</span>bash<span class="k">*</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">IS_BASH</span><span class="o">=</span><span class="nb">true
</span><span class="k">else if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span> <span class="o">==</span> <span class="k">*</span>zsh<span class="k">*</span> <span class="o">]]</span><span class="p">;</span>
  <span class="nv">IS_ZSH</span><span class="o">=</span><span class="nb">true
</span><span class="k">fi</span>

<span class="c"># OR - more lines but DRY.</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">)"</span> <span class="k">in</span>
  <span class="k">*</span>bash<span class="k">*</span> <span class="p">)</span>
    <span class="nv">IS_BASH</span><span class="o">=</span><span class="nb">true</span>
    <span class="p">;;</span>
  <span class="k">*</span>zsh<span class="k">*</span> <span class="p">)</span>
    <span class="nv">IS_LINUX</span><span class="o">=</span><span class="nb">true</span>
    <span class="p">;;</span>
<span class="k">esac</span>
</code></pre></div></div>

<p>Note:</p>

<p>If using a single boolean:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ IS_ZSH</span><span class="o">=</span><span class="si">$(</span><span class="o">[[</span> <span class="s2">"</span><span class="nv">$ZSH_NAME</span><span class="s2">"</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s1">'true'</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s1">'false'</span><span class="si">)</span>
</code></pre></div></div>

<h3 id="using-0">Using $0</h3>

<h4 id="tested-on-macos">Tested on macOS</h4>

<ul>
  <li>Bash
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$0</span>
  <span class="nt">-bash</span>
  <span class="c"># Or</span>

</code></pre></div>    </div>
  </li>
  <li>ZSH
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$0</span>
  <span class="nt">-zsh</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="tested-on-linux">Tested on Linux</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="c"># In terminal.</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$0</span>
/bin/bash
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="c"># In subshell.</span>
<span class="nv">$ </span>bash <span class="nt">-c</span> <span class="s1">'echo $0'</span>
bash
</code></pre></div></div>

<p>ZSH - to be checked.</p>

<h3 id="using-bash-or-zsh_name-variables">Using BASH or ZSH_NAME variables</h3>

<ul>
  <li>Bash
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$BASH</span>
  <span class="c"># ?</span>
</code></pre></div>    </div>
    <ul>
      <li>This is only set when using Bash. However, this weirdly gave response as <code class="language-plaintext highlighter-rouge">/bin/zsh</code> when using Bash when ZSH was the default shell, so need to investigate this further.</li>
    </ul>
  </li>
  <li>ZSH
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$ZSH_NAME</span>
  zsh
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="using-shell">Using SHELL</h3>

<p>This shows the <em>default</em> shell, not your current shell.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$SHELL</span>
</code></pre></div></div>

<p><a href="https://stackoverflow.com/questions/3327013/how-to-determine-the-current-shell-im-working-on">source</a></p>

<h2 id="change-shell">Change shell</h2>

<h3 id="start-new-shell-session">Start new shell session</h3>

<p>Replace the current terminal session with a new one. Use the exec command with the ‚Äìlogin flag so the shell acts as if invoked by login. <a href="https://www.gnu.org/software/bash/manual/html_node/Invoking-Bash.html">source</a></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">exec</span> <span class="nt">-l</span> zsh

<span class="nv">$ </span><span class="nb">exec</span> <span class="nt">-l</span> bash
</code></pre></div></div>

<h3 id="change-default-shell">Change default shell</h3>

<p>To change to ZSH, run one of:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>chsh <span class="nt">-s</span> /bin/zsh

<span class="nv">$ </span>chsh <span class="nt">-s</span> <span class="si">$(</span>which zsh<span class="si">)</span>
</code></pre></div></div>

<h2 id="reload-shell">Reload shell</h2>

<p>If you have edited your Bash configs and want to reload them, you can do this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.bashrc
<span class="nb">source</span> ~/.bash_profile
</code></pre></div></div>

<p>Alternatives below, if you are happy to lose shell history. <a href="https://stackoverflow.com/questions/4608187/how-to-reload-bash-profile-from-the-command-line">source</a></p>

<p>Run this. This runs the login option to ensure bash profile is loaded.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash <span class="nt">-l</span>
</code></pre></div></div>

<p>Or completely replace the current shell. If you exit, the terminal tab will exit and you will no go to the outer shell.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">exec</span> <span class="nt">-l</span> bash
</code></pre></div></div>

<p>Create an function in your <code class="language-plaintext highlighter-rouge">~/.bashrc</code> if you easily run it. This reloads the <em>default</em> shell, not your current shell.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>reload_shell<span class="o">()</span> <span class="o">{</span> <span class="nb">exec</span> <span class="nt">-l</span> <span class="nv">$SHELL</span><span class="p">;</span> <span class="o">}</span>
</code></pre></div></div>

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
