<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>Mail | Dev Cheatsheets</title>

    <meta property="og:title" content="Mail" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Mail" />
<meta name="generator" content="Jekyll v4.3.1" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="Using the `mail` command-line utility on Unix systems" />
    <meta property="og:description" content="Using the `mail` command-line utility on Unix systems" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/commands/mail.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/commands/mail.html" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "Using the `mail` command-line utility on Unix systems",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/shell/commands/mail.html",
    "headline":    "Mail",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/shell/commands/mail.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/shell/commands/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Mail</span>
        </h1>

        
            <blockquote>
                <p>Using the <code class="language-plaintext highlighter-rouge">mail</code> command-line utility on Unix systems</p>

            </blockquote>
        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/shell/">
    Shell
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/shell/commands/">
    Commands
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/shell/commands/mail.html" class="underline">
                Mail
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <p>Send and receive mails on the command-line, for Linux and macOS.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail
</code></pre></div></div>

<p>Mail is located at <code class="language-plaintext highlighter-rouge">/usr/bin/mail</code> on macOS and Linux.</p>

<p>Without setting up an SMTP server like Gmail, you can get the benefit of localhost mails for logging. Such as running crontab commands and mailing successes and failures (or just failures) to localhost‚Äôs mailbox (if <code class="language-plaintext highlighter-rouge">MAILTO</code> is set to a username).</p>

<h2 id="help">Help</h2>

<h3 id="usage">Usage</h3>

<p>There is no <code class="language-plaintext highlighter-rouge">--help</code> but you use a bad flag you‚Äôll get this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Usage: mail [-EiInv] [-s subject] [-c cc-addr] [-b bcc-addr] [-F] to-addr ...
       mail [-EHiInNv] [-F] -f [name]
       mail [-EHiInNv] [-F] [-u user]
       mail -e [-f name]
       mail -H
</code></pre></div></div>

<h3 id="man-page">Man page</h3>

<p>View help.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>man mail
</code></pre></div></div>

<p>See online at <a href="https://www.unix.com/man-page/osx/1/mail/">mail</a> manpage for macOS.</p>

<p>Some highlights:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     -E      Do not send messages with an empty body.  This is useful for piping errors from
             cron(8) scripts.

     -e      Test for the presence of mail in the (by default, system) mailbox.  An exit
             status of 0 is returned if it has mail; otherwise, an exit status of 1 is
             returned.

     -H      Write a header summary only.
</code></pre></div></div>

<h3 id="interactive-mode-usage">Interactive mode usage</h3>

<p>Output from running <code class="language-plaintext highlighter-rouge">?</code> help command in interactive mode:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? ?
    Mail   Commands
t &lt;message list&gt;                type messages
n                               goto and type next message
e &lt;message list&gt;                edit messages
f &lt;message list&gt;                give head lines of messages
d &lt;message list&gt;                delete messages
s &lt;message list&gt; file           append messages to file
u &lt;message list&gt;                undelete messages
R &lt;message list&gt;                reply to message senders
r &lt;message list&gt;                reply to message senders and all recipients
pre &lt;message list&gt;              make messages go back to /var/mail
m &lt;user list&gt;                   mail to specific users
q                               quit, saving unresolved messages in mbox
x                               quit, do not remove system mailbox
h                               print out active message headers
!                               shell escape
cd [directory]                  chdir to directory or home if none given

A &lt;message list&gt; consists of integers, ranges of same, or user names separated
by spaces.  If omitted, Mail uses the last message typed.

A &lt;user list&gt; consists of user names or aliases separated by spaces.
Aliases are defined in .mailrc in your home directory.
</code></pre></div></div>

<h2 id="directories">Directories</h2>

<p>Relevant directories:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/usr/bin/mail</code></li>
  <li><code class="language-plaintext highlighter-rouge">/var/mail/michael</code> or your username</li>
  <li><code class="language-plaintext highlighter-rouge">~/mbox</code></li>
</ul>

<h2 id="install">Install</h2>

<h3 id="debianubuntu">Debian/Ubuntu</h3>

<p>Install.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>mailutils
</code></pre></div></div>

<p>You‚Äôll get prompted for configuration on first install. You can pick localhost if you only need to use it for crontab mails and don‚Äôt need a server.</p>

<p>Note that the user‚Äôs mailbox cannot be created without root access.</p>

<p>You‚Äôll get this error each time:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cannot open mailbox /var/mail/michael: Permission denied
No mail for michael
</code></pre></div></div>

<p>So run this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo touch</span> /var/mail/michael
<span class="nv">$ </span><span class="nb">sudo chown </span>michael /var/mail/michael
</code></pre></div></div>

<p>Now you can run <code class="language-plaintext highlighter-rouge">mail</code>.</p>

<h3 id="macos">macOS</h3>

<p>I have <code class="language-plaintext highlighter-rouge">mail</code> installed on macOS too. Perhaps standard or installed with coreutils.</p>

<p>TBC</p>

<h2 id="run">Run</h2>

<h3 id="interactive">Interactive</h3>

<p>Start interactive session.</p>

<p>Press enter to advanced through mail. The prompt will change to <code class="language-plaintext highlighter-rouge">?</code> and a point at <code class="language-plaintext highlighter-rouge">&gt;</code> for the current position.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail
</code></pre></div></div>

<p>Sample output:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Mail version 8.1 6/6/93.  Type ? for help.
"/var/mail/mcurrin": 7 messages 7 unread
&gt;U  1 mcurrin@C02WL0Y2HV2T  Sun Aug 30 15:36  15/739   "Unicron task failed!"
 U  2 mcurrin@C02WL0Y2HV2T  Tue Sep  1 10:39  15/739   "Unicron task failed!"
 ...
 N  6 mcurrin@C02WL0Y2HV2T  Tue Sep  1 13:33  14/729   "Unicron task failed!"
?
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Mail version 8.1 6/6/93.  Type ? for help.
"/var/mail/mcurrin": 6 messages 1 new 6 unread
 U  1 mcurrin@C02WL0Y2HV2T  Tue Sep  1 11:02  15/739   "Unicron task failed!"
 U  2 mcurrin@C02WL0Y2HV2T  Tue Sep  1 12:00  20/765   "Cron &lt;mcurrin@C02WL0Y2HV2T&gt; echo Testing!"
 U  3 mcurrin@C02WL0Y2HV2T  Tue Sep  1 12:05  15/739   "Unicron task failed!"
 U  4 mcurrin@C02WL0Y2HV2T  Tue Sep  1 12:34  15/739   "Unicron task failed!"
 U  5 mcurrin@C02WL0Y2HV2T  Tue Sep  1 13:01  15/739   "Unicron task failed!"
&gt;N  6 mcurrin@C02WL0Y2HV2T  Tue Sep  1 13:33  14/729   "Unicron task failed!"
</code></pre></div></div>

<p>Enter a number and press to view that mail or just press enter. Press it repeatedly. Press spacebar to jump to end of mail.</p>

<p>After you read a mail it becomes read. And will be moved out the mailbox.</p>

<p>Exit.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? q
</code></pre></div></div>

<h4 id="delete">Delete</h4>

<p>Delete target mail.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? d 2
</code></pre></div></div>

<p>Delete all.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? d *
</code></pre></div></div>

<h3 id="check-mail-status">Check mail status</h3>

<p>See <a href="#man-page">Man page</a> section of this page.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail <span class="nt">-e</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s1">'You have mail'</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s1">'Mailbox is empty'</span>
</code></pre></div></div>

<p>Warning - if there is a permissions error or <code class="language-plaintext highlighter-rouge">mail</code> is not installed, you‚Äôll also get the latter message.</p>

<p>Note that after mail is read, it is archived, but just moved from one <a href="#storage">storage</a> space to another.</p>

<h3 id="read-mail">Read mail</h3>

<p>You will get notified in a terminal window when you have unread mail. When a new tab starts or you press enter.</p>

<p>There is an interval value for this which I think defaults to 60 for one hour.</p>

<p>Use this command to display status, show mail list summary and exit.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail <span class="nt">-H</span>
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Mail version 8.1 6/6/93.  Type ? for help.
"/var/mail/mcurrin": 7 messages 7 unread
&gt;U  1 mcurrin@C02WL0Y2HV2T  Sun Aug 30 15:36  15/739   "Unicron task failed!"
 U  2 mcurrin@C02WL0Y2HV2T  Tue Sep  1 10:39  15/739   "Unicron task failed!"
</code></pre></div></div>

<h3 id="send-mail">Send mail</h3>

<h4 id="recipients">Recipients</h4>

<p>You can send to yourself or another user by setting as target <code class="language-plaintext highlighter-rouge">my-user</code>, which is the same as <code class="language-plaintext highlighter-rouge">my-user@localhost</code>.</p>

<p>Alternatively, send to external address (e.g. example@example.com), however, you will have to configure an SMTP server with credentials, such using your Gmail account. Be careful when storing your email password in plain text on your machine.</p>

<p>How to set up SMTP server access to send mail over the network.</p>
<ul>
  <li><a href="https://hints.macworld.com/article.php?story=20081217161612647">article</a></li>
  <li><a href="https://www.mactricksandtips.com/2008/09/send-mail-over-your-network.html">Send mail over your network</a></li>
</ul>

<h4 id="send">Send</h4>

<p>Send a mail to yourself using address as one of:</p>

<ul>
  <li>Your username e.g. <code class="language-plaintext highlighter-rouge">michael</code> or <code class="language-plaintext highlighter-rouge">$USER</code></li>
  <li>Local address e.g. <code class="language-plaintext highlighter-rouge">michael@localhost</code></li>
  <li>System address (host is set up on installing <code class="language-plaintext highlighter-rouge">mailutils</code>) e.g. <code class="language-plaintext highlighter-rouge">michael@dell-lite</code></li>
</ul>

<p>Single line:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"This is the body"</span> | mail <span class="nt">-s</span> <span class="s2">"My subject"</span> <span class="nv">$USER</span>
</code></pre></div></div>

<p>Multi-line using a Bash heredoc set up using a pair of <code class="language-plaintext highlighter-rouge">EOF</code> characters.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mail -s "My subject" $USER &lt;&lt;EOF
This is
the body
EOF
</code></pre></div></div>

<p>If you omit the message, you‚Äôll be prompted for it. You can use <kbd>CTRL</kbd>+<kbd>D</kbd> to trigger the EOF character. Press <kbd>enter</kbd> to skip over <code class="language-plaintext highlighter-rouge">Cc</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail michael@dell-lite
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cc:
Subject: Mail to self
My content

</code></pre></div></div>

<p>Read it:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mail
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"/var/mail/michael": 2 messages 1 new 1 unread
 U   1 Mail Delivery Syst Mon Nov 16 16:35  73/2216  Undelivered Mail Returned to Sender
&gt;N   2 Michael            Mon Nov 16 16:43  15/429   Mail to self
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? 2
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Return-Path: &lt;michael@dell-lite&gt;
X-Original-To: michael@dell-lite
Delivered-To: michael@dell-lite
Received: by dell-lite (Postfix, from userid 1000)
        id 3550D25E1744; Mon, 16 Nov 2020 16:43:25 +0200 (SAST)
To: &lt;michael@dell-lite&gt;
Subject: Mail to self
X-Mailer: mail (GNU Mailutils 3.7)
Message-Id: &lt;20201116144325.3550D25E1744@dell-lite&gt;
Date: Mon, 16 Nov 2020 16:43:25 +0200 (SAST)
From: Michael &lt;michael@dell-lite&gt;

My content
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? q
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Saved 1 message in /home/michael/mbox
Held 1 message in /var/mail/michael
</code></pre></div></div>

<h3 id="storage">Storage</h3>

<p>Where mail is stored.</p>

<p>Mail is stored here when it is read.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>view /var/mail/<span class="nv">$USER</span>
</code></pre></div></div>

<p>Then moved here once it is read.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>view ~/mbox
</code></pre></div></div>

<p>From the man page:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     /var/mail/*		 Post office.
     ~/mbox			 User's old mail.
     ~/.mailrc			 File giving initial mail commands.  This can be overridden by setting the MAILRC environment variable.
     /tmp/R*			 Temporary files.
     /usr/share/misc/mail.*help  Help files.

     /usr/share/misc/mail.rc
     /usr/local/etc/mail.rc
     /etc/mail.rc		 System-wide initialization files.  Each file will be sourced, in order, if it exists.
</code></pre></div></div>

<h2 id="alternatives">Alternatives</h2>

<p>See also <code class="language-plaintext highlighter-rouge">mutt</code> command.</p>

<p><a href="https://apple.stackexchange.com/questions/44764/is-there-a-command-line-mail-program-for-mac">discussion</a></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>mutt
</code></pre></div></div>

<p>Or Postfix.</p>

<p><a href="https://budiirawan.com/install-mail-server-mac-osx/">post</a></p>

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
