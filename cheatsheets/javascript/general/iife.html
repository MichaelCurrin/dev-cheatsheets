<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>IIFE | Dev Cheatsheets</title>

    <meta property="og:title" content="IIFE" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="IIFE" />
<meta name="generator" content="Jekyll v4.3.1" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="Immediately Invoked Function Expression" />
    <meta property="og:description" content="Immediately Invoked Function Expression" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/javascript/general/iife.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/javascript/general/iife.html" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "Immediately Invoked Function Expression",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/javascript/general/iife.html",
    "headline":    "IIFE",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/javascript/general/iife.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/javascript/general/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>IIFE</span>
        </h1>

        
            <blockquote>
                <p>Immediately Invoked Function Expression</p>

            </blockquote>
        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/javascript/">
    JavaScript
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/javascript/general/">
    General
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/javascript/general/iife.html" class="underline">
                IIFE
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <p>An <em>IIFE</em> is function that executes immediately after it is defined (usually anonymously defined and not called again).</p>

<p>The advantage is that it keeps all its objects limited to its scope, which avoids polluting or overwriting variables or functions in the global namespace. This is useful in the browser, to avoid conflicting with other modules.</p>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE">IIFE</a> doc on Mozilla site.</li>
  <li><a href="https://en.wikipedia.org/wiki/Immediately-invoked_function_expression">IIFE</a> on Wikipedia.</li>
</ul>

<h2 id="syntax">Syntax</h2>

<h2 id="brackets">Brackets</h2>

<p>Enclose a function inside a pair of brackets and then invoke it.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">statements</span>
<span class="p">})();</span>
</code></pre></div></div>

<h2 id="character">Character</h2>

<p>If you prefer, you can use the <em>not</em> operator instead of the pair of brackets.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">statements</span>
<span class="p">}();</span>
</code></pre></div></div>

<h2 id="examples">Examples</h2>

<blockquote>
  <p>The function becomes a function expression which is immediately executed. The variable within the expression can not be accessed from outside it.</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">aName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Barry</span><span class="dl">"</span><span class="p">;</span>
<span class="p">})();</span>

<span class="c1">// Variable aName is not accessible from the outside scope</span>
<span class="nx">aName</span> <span class="c1">// throws "Uncaught ReferenceError: aName is not defined"</span>
</code></pre></div></div>

<blockquote>
  <p>Assigning the IIFE to a variable stores the function‚Äôs return value, not the function definition itself.</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Barry</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">})();</span>

<span class="c1">// Immediately creates the output:</span>
<span class="nx">result</span><span class="p">;</span> <span class="c1">// "Barry"&gt;</span>
</code></pre></div></div>

<h2 id="comparison">Comparison</h2>

<h3 id="standard">Standard</h3>

<ul>
  <li>Plain function
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>Adding a call at the end will give a <strong>syntax error</strong>.
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">}()</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="iife">IIFE</h3>

<p>Surround the function in brackets before calling it will work.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})()</span>
</code></pre></div></div>

<p>Make sure the previous line ends with a semicolon, otherwise you‚Äôll get an error.</p>

<p>e.g.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">x</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">statements</span>
<span class="p">})();</span>

<span class="c1">// i.e.</span>
<span class="nx">x</span> <span class="o">=</span> <span class="nx">y</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">statements</span> <span class="p">})();</span>
</code></pre></div></div>

<p>Instead of brackets, you can use the <em>not</em> operator at the start. This will treat the function as an expression and return <code class="language-plaintext highlighter-rouge">true</code> (since the opposite of <code class="language-plaintext highlighter-rouge">!undefined</code> is <code class="language-plaintext highlighter-rouge">true</code>).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}()</span>
</code></pre></div></div>

<p>This is lighter to read than the brackets pair. The intent is also clearer (brackets are all over a script but exclamation point is rare. Further, this avoids the issue of making sure the previous line has a semicolon.</p>

<p>This is valid:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">x</span> <span class="o">=</span> <span class="nx">y</span>
<span class="o">!</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">statements</span>
<span class="p">}()</span>
</code></pre></div></div>

<h2 id="scope">Scope</h2>

<p>An IIFE is useful to put functions and variables in the scope of a module, so they don‚Äôt fill the global scope in the browser.</p>

<p>If you need access to the window or document, pass those in explicitly.</p>

<p>And you probably want to persist functions or variables outside the IIFE, so attach them to the window object.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="kd">function</span> <span class="p">(</span><span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">statements</span>
<span class="p">}(</span><span class="nb">window</span><span class="p">);</span>
</code></pre></div></div>

<p>Using document:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="kd">function</span> <span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">statements</span>
<span class="p">}(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">);</span>
</code></pre></div></div>

<p>e.g.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">main.js</code>
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">!</span><span class="kd">function</span> <span class="p">(</span><span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">MY_GLOBAL_VAR</span> <span class="o">=</span> <span class="mi">123</span>
    <span class="kd">const</span> <span class="nx">MY_SCOPED_VAR</span> <span class="o">=</span> <span class="mi">456</span>

    <span class="kd">function</span> <span class="nx">myFunc</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">myFunc</span> <span class="o">=</span> <span class="nx">myFunc</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">MY_GLOBAL_VAR</span> <span class="o">=</span> <span class="nx">MY_GLOBAL_VAR</span>
  <span class="p">}(</span><span class="nb">window</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li><code class="language-plaintext highlighter-rouge">index.html</code>
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;script&gt;</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">myFunc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
        
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">MY_GLOBAL_VAR</span><span class="p">)</span>
  <span class="nt">&lt;/script&gt;</span>
</code></pre></div>    </div>
  </li>
</ul>


        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
