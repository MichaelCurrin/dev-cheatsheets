<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Cheatsheets" />

    <title>Managing packages | Dev Cheatsheets</title>

    <meta property="og:title" content="Managing packages" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Managing packages" />
<meta name="generator" content="Jekyll v4.3.2" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="How to install and upgrade packages across projects" />
    <meta property="og:description" content="How to install and upgrade packages across projects" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/javascript/deno/cli/managing-packages.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/javascript/deno/cli/managing-packages.html" />


<script type="application/ld+json">
{
    "name":        "Dev Cheatsheets",
    "description": "How to install and upgrade packages across projects",
    "url":         "https://michaelcurrin.github.io/dev-cheatsheets/cheatsheets/javascript/deno/cli/managing-packages.html",
    "headline":    "Managing packages",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-cheatsheets/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-cheatsheets/feed.xml" title="Dev Cheatsheets" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87705880-12"></script>
    <script>
        window['ga-disable-UA-87705880-12'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-87705880-12');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-cheatsheets/">
            Dev Cheatsheets
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-cheatsheets/">
                                Home
                            </a><a class="page-link" href="/dev-cheatsheets/cheatsheets/">
                                Cheatsheets
                            </a><a class="page-link" href="/dev-cheatsheets/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-cheatsheets/edit/master/cheatsheets/javascript/deno/cli/managing-packages.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-cheatsheets/new/master/cheatsheets/javascript/deno/cli/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Managing packages</span>
        </h1>

        
            <blockquote>
                <p>How to install and upgrade packages across projects</p>

            </blockquote>
        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/">
    Cheatsheets
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/javascript/">
    JavaScript
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/javascript/deno/">
    Deno
</a>

        
     
        
            /
        

        
            
            <a href="/dev-cheatsheets/cheatsheets/javascript/deno/cli/">
    CLI
</a>

        
     
        
            /
        

        
            <a href="/dev-cheatsheets/cheatsheets/javascript/deno/cli/managing-packages.html" class="underline">
                Managing packages
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            <p>Dependencies are stored in a global cache - there is no <code class="language-plaintext highlighter-rouge">node_modules</code> directory.</p>

<h2 id="check-installed-version">Check installed version</h2>

<p>Given this package in use.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="p">{</span> <span class="k">default</span> <span class="k">as</span> <span class="nx">React</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">https://dev.jspm.io/react</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>Actually it doesn‚Äôt have to be in use. It just means the next step will probably find it downloaded already and not have to download it.</p>

<p>Check the package by URL.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno info https://dev.jspm.io/react
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>local: /Users/mcurrin/Library/Caches/deno/deps/https/dev.jspm.io/HASH
type: JavaScript
deps: 4 unique (total 84.4KB)

https://dev.jspm.io/react (168B)
‚îú‚îÄ‚î¨ https://dev.jspm.io/npm:object-assign@4?dew (61B)
‚îÇ ‚îî‚îÄ‚îÄ https://dev.jspm.io/npm:object-assign@4.1.1/index.dew.js (2.36KB)
‚îú‚îÄ‚îÄ https://dev.jspm.io/npm:react@17.0.1/cjs/react.development.dew.js *
‚îî‚îÄ‚î¨ https://dev.jspm.io/npm:react@17.0.1/index.dew.js (264B)
  ‚îî‚îÄ‚î¨ https://dev.jspm.io/npm:react@17.0.1/cjs/react.development.dew.js (81.56KB)
    ‚îî‚îÄ‚îÄ https://dev.jspm.io/npm:object-assign@4?dew *
</code></pre></div></div>

<p>From this, I see that React version <code class="language-plaintext highlighter-rouge">17.0.1</code> is in use.</p>

<p>Or I can check the content in the browser at <a href="https://dev.jspm.io/react">dev.jspm.io/react</a> if I am happy with the latest version.</p>

<p>If I want to lock it, I would then set <code class="language-plaintext highlighter-rouge">17.0.1</code> as my version, or <code class="language-plaintext highlighter-rouge">17.0</code> to allow the patch version to float or <code class="language-plaintext highlighter-rouge">17</code> to allow minor version to float.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="p">{</span> <span class="k">default</span> <span class="k">as</span> <span class="nx">React</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">https://dev.jspm.io/react@17.0.1</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="install-by-running">Install by running</h2>

<p>Deno will download and install dependencies when they are needed in your project.</p>

<p>Such as with <code class="language-plaintext highlighter-rouge">deno run</code> or <code class="language-plaintext highlighter-rouge">deno test</code> (test dependencies).</p>

<h2 id="install-with-cache-subcommand">Install with cache subcommand</h2>

<p>You can get dependencies downloaded and installed without running your app.</p>

<p>Provide a file, not a directory.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno cache index.ts
</code></pre></div></div>

<p>Subsequent runs of that will <strong>not</strong> upgrade dependecies. Unless you follow the <a href="#upgrade-packagse">Upgrade packages</a> section below.</p>

<h2 id="upgrade-packages">Upgrade packages</h2>

<h3 id="change-locked-versions">Change locked versions</h3>

<p>Change the version in your URL.</p>

<p><code class="language-plaintext highlighter-rouge">deps.ts</code></p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">-export { Application } from "https://deno.land/x/abc@v1.2.4/mod.ts";
</span><span class="gi">+export { Application } from "https://deno.land/x/abc@v1.2.0/mod.ts";
</span></code></pre></div></div>

<p>Deno land:</p>

<ul>
  <li>You can lock using an exact version like <code class="language-plaintext highlighter-rouge">@v0.87.0</code>.</li>
  <li>Some packages will provide a short number for the major release number if you are okay with less stability. e.g. <code class="language-plaintext highlighter-rouge">@v1</code> like for <a href="https://deno.land/x/abc@v1">deno.land/x/abc@v1</a>, but in this case it is not the same as the latest <code class="language-plaintext highlighter-rouge">v1.X.X</code>, based on looking and subdependencies..</li>
  <li>Locking to minor version <code class="language-plaintext highlighter-rouge">@v1.2</code> syntax doesn‚Äôt work as far I‚Äôve seen.</li>
</ul>

<p>CDNS:</p>

<ul>
  <li>On some CDNs, you can partially lock such as on a minor version. The JSPM site says <code class="language-plaintext highlighter-rouge">pkg@1.2</code> translates to <code class="language-plaintext highlighter-rouge">~1.2</code> including pre-releases.</li>
</ul>

<p>Then run the same command as to install. This works since the new package version has to be installed for the first time.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno cache index.ts
</code></pre></div></div>

<p>Or skip updating cache and just run. You‚Äôll get the installed packages still.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno run index.ts
</code></pre></div></div>

<h3 id="reload-packages">Reload packages</h3>

<p>Use the <code class="language-plaintext highlighter-rouge">--reload</code> flag to force upgrading packages to the newest available.</p>

<p>This is useful if a dependency is not locked.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno cache <span class="nt">--reload</span> index.ts
</code></pre></div></div>

<p>Or maybe point as <code class="language-plaintext highlighter-rouge">deps.ts</code> instead.</p>

<p>Info on the flag:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-r, --reload=&lt;CACHE_BLOCKLIST&gt;</code> - Reload source code cache (recompile TypeScript)</li>
</ul>

<p>This will upgrade the standard library as well (old packages will be kept though alongside the new ones). This helps, as your use of std lib packages which not locked can break after running <code class="language-plaintext highlighter-rouge">deno upgrade</code>.</p>

<p>Note that 3rd-party packages are also likely to rely on the <a href="https://deno.land/std">std lib</a> - hopefully with version numbers.</p>

<p>I found using <code class="language-plaintext highlighter-rouge">abc@v1.2.4</code> then after upgrading Deno and after running the reload above, things still broke even at the cache stage. I had to upgrade to <code class="language-plaintext highlighter-rouge">abc@v1.3.1</code>. Using <code class="language-plaintext highlighter-rouge">abc@v1</code> did not help as that was even further behind, but not as far behind as <code class="language-plaintext highlighter-rouge">v1.0.0</code>.</p>

<h2 id="locking-versions">Locking versions</h2>

<p>You should probably install all your packages using locked URL versions.</p>

<p>The <a href="https://deno.land/manual/standard_library">Standard library</a> manual recommends that you <strong>lock</strong> packages used from the standard lib.</p>

<p>This version will be the same whenever installed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"https://deno.land/x/abc@v1.2.4/mod.ts"
</code></pre></div></div>

<p>This will install the latest at the time and will float.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"https://deno.land/x/abc/mod.ts"
</code></pre></div></div>

<p>This is not reliable though - as if you upgrade or delete/install dependencies on your machine or install on another machine or on CI, then you‚Äôll get a newer version. Which might break you app.</p>

<h3 id="thoughts-on-locking-and-doing-an-upgrade">Thoughts on locking and doing an upgrade</h3>

<p>If you already lock versions, then upgrading them with <code class="language-plaintext highlighter-rouge">--reload</code> as above may not actually change anything. Even the subdependencies I think would not change, because a release of <code class="language-plaintext highlighter-rouge">1.2.3</code> should also (hopefully) lock external packages with versions.</p>

<p>Though, if the external package only locks within a <strong>range</strong> like <code class="language-plaintext highlighter-rouge">^3.4.5</code> in NPM, then if you use the upgrade command then you‚Äôll keep your direct dependenices frozen by version numbers but allow floating subdependencies to be upgraded.</p>

<p>This upgrade command could be used in conjunction with the lockfile I guess.</p>

<h2 id="cache-directory">Cache directory</h2>

<p>Deno uses a single cache directory for packages installed across projects.</p>

<p>See <a href="https://deno.land/manual/tools/dependency_inspector">Dependency Inspector</a> in the docs.</p>

<p>Run like this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno info
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DENO_DIR location: "/Users/mcurrin/Library/Caches/deno"
Remote modules cache: "/Users/mcurrin/Library/Caches/deno/deps"
TypeScript compiler cache: "/Users/mcurrin/Library/Caches/deno/gen"
</code></pre></div></div>

<p>Check a specific package. If that not installed, it will be downloaded first.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno info https://deno.land/x/abc@v1.2.4/mod.ts
</code></pre></div></div>

<p>Location on macOS:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">~/Library/Caches/deno/gen/https/deno.land/HASH.js</code></li>
</ul>

<h2 id="install-global-package">Install global package</h2>

<p>Global packages will be installed this location:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">~/.deno/bin</code></li>
</ul>

<p>Make sure that is in your path, if you want to run them from anywhere.</p>

<p>Install a package by URL.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno <span class="nb">install</span> <span class="nt">--allow-net</span> <span class="nt">--unstable</span> URL
</code></pre></div></div>

<p>For example, here we install a Deno package from <code class="language-plaintext highlighter-rouge">deno.land/x</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deno <span class="nb">install</span> <span class="nt">--allow-net</span> <span class="nt">--unstable</span> https://deno.land/x/vno/install/vno.ts
</code></pre></div></div>

<p>And run it.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vno <span class="nt">--help</span>
</code></pre></div></div>

        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-cheatsheets/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Cheatsheets</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-cheatsheets/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>A collection of code snippets and CLI guides for quick and easy reference while coding</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-cheatsheets"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
